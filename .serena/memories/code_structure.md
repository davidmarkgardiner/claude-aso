# Code Structure

## Repository Organization

### Infrastructure Components
- **`aso-production-stack/`** - Production-ready ASO resource definitions
  - `backup-recovery.yaml`, `monitoring.yaml`, `networking.yaml`, `storage.yaml`
  - `database.yaml`, `keyvault.yaml`, `compliance.yaml`
- **`apps/`** - Application deployments and GitOps configurations
  - `cert-manager/`, `external-dns/`, `istio-deployment/`
  - `tests/` for validation and testing
- **`istio-apps/`** - Istio service mesh configurations
  - Traffic management, security policies, observability

### Platform Engineering
- **`platform-api/`** - Node.js/TypeScript backend API
  - `src/` - Source code with controllers, services, middleware
  - `tests/` - Unit, integration, and demo tests
- **`platform-ui/`** - React/TypeScript frontend
  - `src/` - Components, hooks, utilities
  - `public/` - Static assets
- **`platform-rbac/`** - Role-based access control configurations

### Automation & Scripts
- **`scripts/`** - Nushell automation scripts
  - `common.nu` - Provider credential management
  - `kubernetes.nu` - Multi-cloud cluster operations
  - `crossplane.nu`, `atlas.nu`, `ingress.nu` - Service installations
- **`dot.nu`** - Main orchestration script for setup/teardown

### Configuration & Templates
- **`prompts/`** - Prompt templates for ASO workflows
- **`devbox.json`** - Development environment dependencies
- **`.env`** - Environment variables (generated by setup)

## Key Architectural Patterns

### Multi-Cloud Abstraction
- Provider-agnostic scripts handle AWS, Azure, GCP, Kind
- Consistent interface across different cloud providers
- Environment-specific configuration management

### GitOps Workflow
- Flux controllers manage application deployments
- Kustomize overlays for environment-specific configurations
- Helm charts for complex application packaging

### Service Mesh Integration
- Istio for traffic management and security
- mTLS enforcement and traffic policies
- Observability and monitoring integration

### Platform Engineering
- Namespace-as-a-Service API for multi-tenancy
- Self-service capabilities through web UI
- RBAC integration for access control

### Infrastructure as Code
- Kubernetes-native resource definitions
- ASO CRDs for Azure resource management
- Declarative configuration approach